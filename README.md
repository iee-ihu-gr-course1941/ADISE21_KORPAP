# ADISE21_KORPAP
Χαρτιά Μουτζούρης
---------
Table of Contents
=================
   * [Εγκατάσταση](#εγκατάσταση)
      * [Απαιτήσεις](#απαιτήσεις)
      * [Οδηγίες Εγκατάστασης](#οδηγίες-εγκατάστασης)
   * [Περιγραφή API](#περιγραφή-api)
      * [Methods](#methods)
         * [Board](#board)
            * [Ανάγνωση Board](#ανάγνωση-board)
            * [Αρχικοποίηση Board](#αρχικοποίηση-board)
         * [Piece](#piece)
            * [Ανάγνωση Θέσης/Πιονιού](#ανάγνωση-θέσηςπιονιού)
            * [Μεταβολή Θέσης Πιονιού](#μεταβολή-θέσης-πιονιού)
         * [Player](#player)
            * [Ανάγνωση στοιχείων παίκτη](#ανάγνωση-στοιχείων-παίκτη)
            * [Καθορισμός στοιχείων παίκτη](#καθορισμός-στοιχείων-παίκτη)
         * [Status](#status)
            * [Ανάγνωση κατάστασης παιχνιδιού](#ανάγνωση-κατάστασης-παιχνιδιού)
      * [Entities](#entities)
         * [cards](#cards)
         * [deck_cards](#deck_cards)
         * [players](#players)
         * [game_status](#game_status)


# Demo Page

Μπορείτε να κατεβάσετε τοπικά ή να επισκευτείτε την σελίδα: 
https://users.iee.ihu.gr/~it154586/ADISE21_KORPAP/authentication/login.php

# Εγκατάσταση

## Απαιτήσεις

* phpMyAdmin
* Mysql Server
* php

## Οδηγίες Εγκατάστασης

 * Κάντε clone το project σε κάποιον φάκελο <br/>
  `$ git clone https://github.com/iee-ihu-gr-course1941/ADISE21_KORPAP.git`

 * Θα πρέπει να δημιουργήσετε στην Mysql την βάση με όνομα 'adise21' και να φορτώσετε σε αυτήν την βάση τα δεδομένα από το αρχείο schema.sql

 * Θα πρέπει να φτιάξετε το αρχείο /db/Db_upass.php το οποίο να περιέχει:
```
    <?php
	$DB_PASS = 'adise';
	$DB_USER = 'root';
    ?>
```

# Περιγραφή Παιχνιδιού

Ο μουτζούρης παίζεται ως εξής: Ο στόχος του παιχνιδιού είναι να μείνεις χωρίς φύλλα στο χέρι. Αυτός που θα μείνει με ένα φύλλο είναι ο χαμένος.

Οι κανόνες είναι οι : Πριν ξεκινήσετε αφαιρείτε από την τράπουλα όλες τις φιγούρες και κρατάτε μόνο τον Ρήγα Μπαστούνι.Στην συνέχεια ο κάθε παίχτης προσπαθεί να ζευγαρώσει τα φύλλα που κρατάει στα χέρια του π.χ 2 Άσσους κ.τ.λ. Επίσης μπορεί να πάρει απο τον αντίπαλο μια τυχαία κάρτα του.

Η βάση μας κρατάει τους εξής πίνακες και στοιχεία : cards, deck_cards, game_status, players

Η εφαρμογή αναπτύχθηκε μέχρι το σημείο : Ο παίχτης να μπορεί να εισέλθει/εγγραφή με τα διαπιστευτήρια του στην βάση. Όταν ο παίχτης κάνει σύνδεση δημιουργείται ένα token το οποίο καταχωρείται στην βάση και το παιχνίδι ξεκινά μόλις εισέλθουν 2 παίχτες. Μπορεί να πάρει τις κάρτες του αντιπάλου καθώς και να ταιριάξει 2 ίδιες. Δεν υλοποιήθηκε για παραπάνω απο 2 παίχτες, το χρονόμετρο δεν λειτουργεί σωστά, δεν κρατά την σειρά του παίχτη και δεν βγάζει νικητή.

## Συντελεστές

Παπουνίδης Λάζαρος: JS,PHP API,HTML,CSS,DB

....


# Περιγραφή API

## Methods


### Board
#### Ανάγνωση Board

```
GET /board/
```

Επιστρέφει το [Board](#Board).

#### Αρχικοποίηση Board
```
POST /board/
```

Αρχικοποιεί το Board, δηλαδή το παιχνίδι. Γίνονται reset τα πάντα σε σχέση με το παιχνίδι.
Επιστρέφει το [Board](#Board).

### Piece
#### Ανάγνωση Θέσης/Πιονιού

```
GET /board/piece/:x/:y/
```

Κάνει την κίνηση του πιονιού από την θέση x,y στην νέα θέση. Προφανώς ελέγχεται η κίνηση αν είναι νόμιμη καθώς και αν είναι η σειρά του παίκτη να παίξει με βάση το token.
Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένες x,y.
Περιλαμβάνει το χρώμα του πιονιού και τον τύπο.

#### Μεταβολή Θέσης Πιονιού

```
PUT /board/piece/:x/:y/
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `x`               | Η νέα θέση x                | yes        |
| `y`               | Η νέα θέση y                | yes        |

Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένες x,y.
Περιλαμβάνει το χρώμα του πιονιού και τον τύπο


### Player

#### Ανάγνωση στοιχείων παίκτη
```
GET /players/:p
```

Επιστρέφει τα στοιχεία του παίκτη p ή όλων των παικτών αν παραληφθεί. Το p μπορεί να είναι 'B' ή 'W'.

#### Καθορισμός στοιχείων παίκτη
```
PUT /players/:p
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `username`        | Το username για τον παίκτη p. | yes        |
| `color`           | To χρώμα που επέλεξε ο παίκτης p. | yes        |

Επιστρέφει τα στοιχεία του παίκτη p και ένα token. Το token πρέπει να το χρησιμοποιεί ο παίκτης καθόλη τη διάρκεια του παιχνιδιού.

### Status

#### Ανάγνωση κατάστασης παιχνιδιού
```
GET /status/
```

Επιστρέφει το στοιχείο [Game_status](#Game_status).

## Entities

### players
---------

O κάθε παίκτης έχει τα παρακάτω στοιχεία:

| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `id`                     | Το id του παίχτη                             | INT                                 |
| `name`                   | Το όνομα του παίχτη                          | String                              |
| `last_action`            | Η τελευταία ενέργεια του παίχτη              | Date                                |
| `token`                  | To κρυφό token του παίκτη. Το οποίο εισέρχεται στην βάση όταν συνδεθεί 
                              και διαγράφεται όταν αποσυνδεθεί            | String                              |
| `player_turn`            | Η σειρά του παίχτη                           | INT                                 |

### cards
---------

Οι κάρτες έχουν τα παρακάτω στοιχεία: 

| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `number`                 | Ο αριθμός της κάρτας                         | INT                                 |
| `symbol`                 | Το σύμβολο της κάρτας                        | String                              |
| `image`                  | Η φωτογραφία της κάρτας                      | String                              |
| `id`                     | Το id της κάρτας που αυξάνεται κατα 1        | INT                                 |

### deck_cards
---------

Το μοίρασμα των καρτών έχει τα παρακάτω στοιχεία: 

| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `id_card`                | Το id της κάρτας που έχει μοιραστεί          | INT                                 |
| `id_player`              | Το id του παίχτη που έχει συνδεθεί           | INT                                 |
| `id`                     | Το id της κάρτας που αυξάνεται κατα 1 σε κάθε καινούργια παρτίδα | INT             |

### game_status
---------

H κατάσταση παιχνιδιού έχει τα παρακάτω στοιχεία:

| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `status  `               | Κατάσταση             | 'not active', 'initialized', 'started', 'ended', 'aborded'     |
| `p_turn`                 | Η σειρά του παίκτη που παίζει        | 'L','N',null                              |
| `result`                 | H σειρά του παίκτη που κέρδισε |'L','N',null                              |
| `last_change`            | Τελευταία αλλαγή/ενέργεια στην κατάσταση του παιχνιδιού         | timestamp |
| `id`                     | Το id του board                               | INT | 
